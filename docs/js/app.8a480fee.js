(function(e){function t(t){for(var a,i,c=t[0],l=t[1],s=t[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),o={class:"body"},r={class:"search"},i={key:0,class:"addnodebox"},c=Object(a["e"])("div",null,[Object(a["d"])(" 示例："),Object(a["e"])("br"),Object(a["d"])("人物名称①-孙中山；"),Object(a["e"])("br"),Object(a["d"])("关系类型-子辈；"),Object(a["e"])("br"),Object(a["d"])("关系名称-儿子；"),Object(a["e"])("br"),Object(a["d"])("人物名称②-孙科 ")],-1),l={class:"inputNode"},s=Object(a["e"])("p",null,"人物名称①：",-1),u={class:"inputNode"},d=Object(a["e"])("p",null,"关系类型：",-1),f=Object(a["e"])("option",{value:"1"},"父辈",-1),h=Object(a["e"])("option",{value:"2"},"同辈",-1),p=Object(a["e"])("option",{value:"3"},"子辈",-1),m={class:"inputNode"},b=Object(a["e"])("p",null,"关系名称：",-1),y={class:"inputNode"},O=Object(a["e"])("p",null,"人物名称②：",-1),v=Object(a["e"])("div",{id:"main",style:{width:"100vw",height:"100vh"}},null,-1);function j(e,t,n,j,g,N){return Object(a["f"])(),Object(a["b"])("div",o,[Object(a["e"])("div",r,[Object(a["i"])(Object(a["e"])("input",{placeholder:"例:儿子","onUpdate:modelValue":t[1]||(t[1]=function(e){return g.searchStr=e}),onChange:t[2]||(t[2]=function(){return N.searchItem&&N.searchItem.apply(N,arguments)})},null,544),[[a["h"],g.searchStr]]),Object(a["e"])("button",{onClick:t[3]||(t[3]=function(){return N.searchItem&&N.searchItem.apply(N,arguments)})},"查询"),Object(a["e"])("button",{id:"addnode-btn",onClick:t[4]||(t[4]=function(e){return g.isshowOfAdd=!g.isshowOfAdd})}," 添加节点 ")]),g.isshowOfAdd?(Object(a["f"])(),Object(a["b"])("div",i,[c,Object(a["e"])("div",null,[Object(a["e"])("div",l,[s,Object(a["i"])(Object(a["e"])("input",{type:"text",placeholder:"孙中山","onUpdate:modelValue":t[5]||(t[5]=function(e){return g.selfNode.fromName=e})},null,512),[[a["h"],g.selfNode.fromName]])]),Object(a["e"])("div",u,[d,Object(a["i"])(Object(a["e"])("select",{name:"relationType","onUpdate:modelValue":t[6]||(t[6]=function(e){return g.selfNode.relationType=e}),id:"relationType"},[f,h,p],512),[[a["g"],g.selfNode.relationType]])]),Object(a["e"])("div",m,[b,Object(a["i"])(Object(a["e"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return g.selfNode.relationName=e}),type:"text",placeholder:"儿子"},null,512),[[a["h"],g.selfNode.relationName]])]),Object(a["e"])("div",y,[O,Object(a["i"])(Object(a["e"])("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=function(e){return g.selfNode.toName=e}),placeholder:"孙科"},null,512),[[a["h"],g.selfNode.toName]])])]),Object(a["e"])("button",{class:"inputNode",onClick:t[9]||(t[9]=function(){return N.addNode&&N.addNode.apply(N,arguments)})},"确定添加")])):Object(a["c"])("",!0),v])}var g=n("2909"),N=n("b85c"),S=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("159b"),n("b0c0"),n("25f0"),n("b64b"),{tooltip:{},width:"90vw",height:"90vh",animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",color:["#83e0ff","#45f5ce","#b158ff"],series:[{type:"graph",layout:"force",force:{repulsion:1e3,edgeLength:150,initLayout:"force"},edgeSymbol:["circle","arrow"],edgeSymbolSize:[0,0],roam:"move",label:{show:!0},lineStyle:{opacity:1,width:2,curveness:0}}]}),w=S,k=n("313e"),T=n("bc3a"),x=n.n(T),E=function(e){return new Promise((function(t){console.log(e),x.a.get(e).then((function(e){var n=e.data;t(n)}))}))},I={created:function(){var e=this;E("./data/Sun-Yat-sen_links.json").then((function(t){var n=[],a=new Set;t.forEach((function(e){var t=e.source,o=e.target,r=t<o?t+"#"+o:o+"#"+t,i=a.size;a.add(r),i!==a.size&&(e.label={show:!0,formatter:e.relationName,color:"red"},e.symbolSize=[0,10],n.push(e))})),w.series[0].links=n,E("./data/Sun-Yat-sen.json").then((function(a){var o=[];for(var r in a){var i={};i.id=r,i.name=a[r].name,i.draggable=!0,i.category=a[r].category,i.value="生日:".concat(a[r].birth),o.push(i)}var c=[],l=new Set;n.forEach((function(e){l.add(e.source),l.add(e.target)}));var s,u={},d=Object(N["a"])(l);try{for(d.s();!(s=d.n()).done;){var f=s.value;u[f]=50}}catch(v){d.e(v)}finally{d.f()}e.countObj=u,function(e){n.forEach((function(t){"1"==t.relationType?(u[t.source]-=e,u[t.target]+=e):"3"==t.relationType&&(u[t.source]+=e,u[t.target]-=e)}))}(10);var h,p=Object(N["a"])(l);try{for(p.s();!(h=p.n()).done;){var m=h.value,b={};b.id=m,b.name=a[m].name,b.symbolSize=u[m],b.draggable=!0,b.category=a[m].category,b.value="生日:".concat(a[m].birth),c.push(b)}}catch(v){p.e(v)}finally{p.f()}var y=function(e){var t=new Set,n=[];e.forEach((function(e){t.add(e.category)}));var a=Object(g["a"])(t);return a.forEach((function(e){n[e]={name:e}})),n},O=y(c);w.categories=O,w.series[0].data=c,e.originData=o,e.data=c,e.links=t,e.mychart.setOption(e.myoption),e.mychart.on("click",(function(t){e.searchStr=t.name,e.searchItem()}))}))}))},data:function(){return{isshowOfAdd:!1,selfNode:{fromName:"",relationType:"",relationName:"",toName:""},myoption:w,links:[],data:[],searchStr:"孙科",countObj:{}}},computed:{mychart:function(){return k["a"](document.getElementById("main"))},mydata:function(){return this.myoption.series[0].data},mylinks:function(){return this.myoption.series[0].links}},methods:{addNode:function(){var e=this.data,t=this.selfNode,n="",a="";e.forEach((function(e){e.name==t.fromName?n=e.id:e.name==t.toName&&(a=e.id)}));var o={},r={symbolSize:50};o.label={show:!0,color:"red"},o.symbolSize=[0,10];var i={};n&&a?(console.log(1,n,a),o.source=n,o.target=a,o.relationName=t.relationName,o.relationType=t.relationType,o.label.formatter=t.relationName):n&&!a?(a=(Object.keys(this.originData).length+1).toString(),r.id=a,r.name=t.toName,o.source=n,o.target=a,o.relationName=t.relationName,o.relationType=t.relationType,o.label.formatter=t.relationName):!n&&a?(n=(Object.keys(this.originData).length+1).toString(),r.id=n,r.name=t.fromName,o.source=n,o.target=a,o.relationName=t.relationName,o.relationType=t.relationType,o.label.formatter=t.relationName):(n=(Object.keys(this.originData).length+1).toString(),r.id=n,r.name=t.fromName,a=(Object.keys(this.originData).length+2).toString(),i.id=a,i.id=a,i.name=t.toName,o.source=n,o.target=a,o.relationName=t.relationName,o.relationType=t.relationType,o.label.formatter=t.relationName),this.data.push(r),0!=Object.keys(i).length?this.data.push(i):console.log(),this.links.push(o),console.log(this.links),this.myoption.series[0].data=this.data,this.myoption.series[0].links=this.links},searchItem:function(){var e=this.searchStr,t=this.data,n=this.links,a=[],o=[],r=new Set;if(e){var i,c="",l=Object(N["a"])(t);try{for(l.s();!(i=l.n()).done;){var s=i.value;if(s.name==e){c=s.id;break}}}catch(b){l.e(b)}finally{l.f()}if(!c)return void console.log("没有相应的数据");if(n.forEach((function(e){e.source==c&&(e.label={show:!0,formatter:e.relationName,color:"red"},e.symbolSize=[0,10],a.push(e))})),a.length){a.forEach((function(e){r.add(e.source),r.add(e.target)}));var u,d=Object(N["a"])(r);try{for(d.s();!(u=d.n()).done;){var f,h=u.value,p=Object(N["a"])(this.data);try{for(p.s();!(f=p.n()).done;){var m=f.value;m.id==h?o.push(m):console.log()}}catch(b){p.e(b)}finally{p.f()}}}catch(b){d.e(b)}finally{d.f()}this.myoption.series[0].data=o,this.myoption.series[0].links=a}}else alert("请输入查询字段~")}},watch:{mydata:function(){var e=this;this.mychart.setOption(this.myoption),this.mychart.on("click",(function(t){e.searchStr=t.name,e.searchItem()}))},mylinks:function(){var e=this;this.mychart.setOption(this.myoption),this.mychart.on("click",(function(t){e.searchStr=t.name,e.searchItem()}))}}};n("c354");I.render=j;var z=I;Object(a["a"])(z).mount("#app")},"9eac":function(e,t,n){},c354:function(e,t,n){"use strict";n("9eac")}});
//# sourceMappingURL=app.8a480fee.js.map